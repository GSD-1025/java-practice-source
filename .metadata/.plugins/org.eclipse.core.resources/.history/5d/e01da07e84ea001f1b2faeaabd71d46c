
import java.util.Random;
import java.util.Scanner;
public class test {
	static String map[][][] = new String[13][13][4];
	static int user[][] = new int[4][4]; // 최대 4인용, 4인의 {가진 돈, 유저 index, 유저가 위치한 x좌표, 유저가 위치한 y좌표}
	static String userLand[][] = new String[user.length][10];
	static Scanner in = new Scanner(System.in);
	static Random r = new Random();
	static int doubleCnt = 0, userNum  = 0, donation = 0;
	public static void main(String[] args) {
		int p = 1;
		mapSeting();
		userNum = userSeting();
		mapPrint();
		while (true) {
			System.out.println("---------------------------------------------------------------------------------------");
			System.out.print(p + "번 플레이어 차례\n주사위 굴리기 enter입력");
			in.nextLine();
			int num = dice();
			moving(p,num);
			mapPrint();
			if(map[user[p-1][3]][user[p-1][2]][0].equals("기부")) {
				System.out.println("-------- 땅 정보------------");
				System.out.println("기부\n100000원을 기부했습니다.");
				donation += 100000;
				user[p-1][1] -= 100000;
			}else if(map[user[p-1][3]][user[p-1][2]][0].equals("기부복권")) {
				System.out.println("-------- 땅 정보------------");
				System.out.println("기부복권 모인금액: "+ donation + "\n 복권당첨! 모인금액을 드립니다!");
				user[p-1][1] += donation;
				donation = 0;
			}else
			if(map[user[p-1][3]][user[p-1][2]][2] != null && map[user[p-1][3]][user[p-1][2]][2].equals(" ")) {
				landInfo(user[p-1][2],user[p-1][3]);
				for(;;) {
					System.out.println("땅을 구매 하시겠습니까? yes or no");
					String a = in.nextLine();
					if(a.equals("yes")) {
						landBuy(p,user[p-1][2],user[p-1][3]);
						break;
					}else if(a.equals("no")) {
						break;
					}else {
						System.out.println("잘못 입력하셨습니다. 다시입력해주세요");
					}
				}
			}
			userInfo();
			System.out.println("현재모인 기부금액: " + donation);
			if(doubleCnt == 0) {
				p++;
				if(p > userNum)
					p = 1;
			}

		}

	}
	public static void landInfo(int x, int y) {
		System.out.println("-------- 땅 정보------------");
		System.out.println(map[y][x][0]);
		System.out.println("토지 가격: " + map[y][x][1]);
		System.out.println("토지 소유자: " + map[y][x][2]);
	}
	
	public static void landBuy(int pNum, int x, int y) {
		if(user[pNum-1][0] >= Integer.parseInt(map[y][x][1])) {
			user[pNum-1][0] -= Integer.parseInt(map[y][x][1]);
			for(int i = 0;; i++) {
				if(userLand[pNum-1][i] == null) {
					userLand[pNum-1][i] = map[y][x][0];
					break;
				}
			}
			map[y][x][2] = Integer.toString(pNum);
		}else {
			System.out.println("금액이 부족합니다.");
		}
		
	}
	
 	public static void moving(int pNum, int dice) {
		if(user[pNum-1][3] == 1) {
			map[user[pNum-1][3]-1][user[pNum-1][2]][pNum-1] = "0";
		}else if(user[pNum-1][3] == 11) {
			map[user[pNum-1][3]+1][user[pNum-1][2]][pNum-1] = "0";
		}else if(user[pNum-1][2] == 1) {
			map[user[pNum-1][3]][user[pNum-1][2]-1][pNum-1] = "0";
		}else if(user[pNum-1][2] == 11) {
			map[user[pNum-1][3]][user[pNum-1][2]+1][pNum-1] = "0";
		}
		
		while(dice>0) {
			if((user[pNum-1][2]+1) < map[0].length-1 && user[pNum-1][3] == 1 ) {
				user[pNum-1][2]++;			
			}
			else if((user[pNum-1][2]) == map[0].length-2 && user[pNum-1][3]+1 < map.length-1) {
				user[pNum-1][3]++;				
			}
			else if(user[pNum-1][3] == map.length-2 && user[pNum-1][2]-1 > 0) {
				user[pNum-1][2]--;
			}
			else if(user[pNum-1][2] == 1 && user[pNum-1][3]-1 > 0) {
				user[pNum-1][3]--;		
			}
			
			if(user[pNum-1][2] == 11 && user[pNum-1][3] == 11) {
				System.out.println("출발지 도착! money + 300000");
				user[pNum-1][0] += 300000;
			}
			dice--;
		}
		
		if(user[pNum-1][3] == 1) {
			map[user[pNum-1][3]-1][user[pNum-1][2]][pNum-1] = Integer.toString(pNum);
		}else if(user[pNum-1][3] == 11) {
			map[user[pNum-1][3]+1][user[pNum-1][2]][pNum-1] = Integer.toString(pNum);
		}else if(user[pNum-1][2] == 1) {
			map[user[pNum-1][3]][user[pNum-1][2]-1][pNum-1] = Integer.toString(pNum);
		}else if(user[pNum-1][2] == 11) {
			map[user[pNum-1][3]][user[pNum-1][2]+1][pNum-1] = Integer.toString(pNum);
		}
		
		
	}
	
	public static int dice() {
		int dice1 = r.nextInt(6)+1;
		int dice2 = r.nextInt(6)+1;
		System.out.println("주사위1 [" + dice1 + "] 주사위2 [" + dice2 + "] 나온숫자: " + (dice1+dice2));
		if(dice1 == dice2) {
			System.out.println("주사위 더블!! 한번더");
			doubleCnt++;
		}
		else 
			doubleCnt = 0;
		return dice1+dice2;
	}
	
	public static void mapSeting() {
		int x=0, y=0;
		while(true) {
			for(int i = 0; i < map[0][0].length; i++) {
				map[x][y][i] = "0";
			}
			if(x < map[0].length-1 && y==0) {
				x++;
			}
			else if(x == map[0].length-1 && y < map.length-1) {
				y++;
			}
			else if(y == map.length-1 && x > 0) {
				x--;
			}
			else if(x == 0 && y > 0) {
				y--;
			}

			if(x == 0 && y == 0) {
				break;
			}
		}
		
	
		for(int i = 2; i < map.length-2; i++) {
			for(int j = 2; j < map[0].length-2; j++) {
				map[i][j][0] = "";
			}
		}
			
		
		map[1][1][0]="기부복권";
		map[11][11][0]="출발";
		map[11][1][0]="무인도";
		map[1][11][0]="우주여행";
		String[] mapl1= {"대만","기부","중국","필리핀","제주도","싱가포르","기부","이집트","터키"};
		String[] mapl2= {"그리스","기부","덴마크","스웨덴","여객기","스위스","기부","독일","캐나다"};
		String[] mapl3= {"아르헨티나","기부","브라질","기부","부산","하와이","포르투갈","크루즈","스페인"};
		String[] mapl4= {"일본","우주선","프랑스","이탈리아","기부","영국","미국","기부","대한민국"};
		//라인1
		for(int i=0; i<4;i++) {
			for(int j=0; j<9; j++) {
				if(i==0) {
				  map[11][10-j][i]=mapl1[j];
				}else if(map[11][10-j][0].equals("기부")) {
				  map[11][10-j][1]="100000";
				}else if(i==1) {
				  map[11][10-j][i]="200000";
				}else if(i==2) {
				  map[11][10-j][i]=" ";
				}else if(i==3) {
				  map[11][10-j][i]=" ";
				}
			}
		}
		//라인2
		for(int i=0; i<4;i++) {
			for(int j=0; j<9; j++) {
				if(i==0) {
				  map[10-j][1][i]=mapl2[j];
				}else if(map[10-j][1][0].equals("기부")) {
				  map[10-j][1][i]="100000";
				}else if(i==1) {
				  map[10-j][1][i]="300000";
				}else if(i==2) {
				  map[10-j][1][i]=" ";
				}else if(i==3) {
				  map[10-j][1][i]=" ";
				}
			}
		}
		//라인3
		for(int i=0; i<4;i++) {
			for(int j=0; j<9; j++) {
				if(i==0) {
				  map[1][j+2][i]=mapl3[j];
				}else if(map[1][j+2][0].equals("기부")) {
				  map[1][j+2][1]="100000";
				}else if(i==1) {
				  map[1][j+2][i]="400000";
				}else if(i==2) {
				  map[1][j+2][i]=" ";
				}else if(i==3) {
				  map[1][j+2][i]=" ";
				}
			}
		}
		//라인4
		for(int i=0; i<4;i++) {
			for(int j=0; j<9; j++) {
				if(i==0) {
				  map[j+2][11][i]=mapl4[j];
				}else if(map[j+2][11][0].equals("기부")) {
				  map[j+2][11][1]="100000";
				}else if(i==1) {
				  map[j+2][11][i]="500000";
				}else if(i==2) {
				  map[j+2][11][i]=" ";
				}else if(i==3) {
				  map[j+2][11][i]=" ";
				}
			}
		}
	}
	
	public static void mapPrint() {
		for(int i = 0; i < map.length; i++) {
			for(int j = 0; j< map[i].length; j++) {
				if(i == 0 || i == map.length-1 || j == 0 || j == map[i].length-1) {
					for(int k = 0; k <map[i][j].length; k++) {
						if(!map[i][j][k].equals("0"))
							System.out.print(map[i][j][k]);
					}
					System.out.print("\t");
				}
				else
					System.out.print("" + map[i][j][0] + "\t");
			}
			System.out.println("\n");
		}
	}
	
	public static int userSeting() {
		int userNum;
		while(true) {
			System.out.println("인원을 입력해주세요(최대 4인): ");
			userNum = in.nextInt();
			in.nextLine();
			if( 0 < userNum && userNum < 5) {
				System.out.println("인원수: " + userNum + "명");
				break;
			}
			else {
				System.out.println("인원이 맞지 않습니다. 다시 입력해 주세요!");
			}
		}
		
		for(int i = 0; i < userNum; i++) {
			user[i][0] = 1500000;
			user[i][1] = i;
			user[i][2] = 11;
			user[i][3] = 11;
			map[12][11][i] = Integer.toString(i+1);
		}
		
		return userNum;
		
	}
	
	public static void userInfo() {
		System.out.println("------- 플레이어 정보---------");
		for(int i = 0; i < userNum; i++) {
			if(user[i][0] >= 0) {
				System.out.print("플레이어" + (i+1) + " 보유금액: " + user[i][0] + "원 \t 보유 땅: ");
				for(int j = 0; userLand[i][j] != null; j++) {
					System.out.print(userLand[i][j] + " ");
				}
			}
			System.out.println();
		}
	}

	public static void addLand(int userNum, String landName) {
		for(int i = 0;  i < userLand[userNum].length; i++ ) {
			if(userLand[userNum][i] == null) {
				userLand[userNum][i] = landName;
				return;
			}
		}
	}
	 
	public static void subLand(int userNum, String landName) {
		for(int i = 0;  i < userLand[userNum].length; i++ ) {
			if(userLand[userNum][i] == landName) {
				for(int j = i; j < userLand[userNum].length; j++) {
					userLand[userNum][j] = userLand[userNum][j+1];
					if(userLand[userNum][j+1] == null) {
						break;
					}
				}
				return;
			}
		}
	}
	
	public static void addmoney(int userNum, int money) {
		user[userNum][0] += money;
	}
	 
	public static void submoney(int userNum, int money) {
		user[userNum][0] -= money;
	}
}